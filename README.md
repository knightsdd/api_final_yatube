# api_final

**Описание**

Проект демонстрирует работу API с социльной сетью.

Доступный функционал:

- Запрашивать список существующих постов, возможна пагинация (авторизованые пользователи и анонимы)
- Запрашивать описание конкретного поста (авторизованые пользователи и анонимы)
- Создавать свои посты (только авторизованые пользователи)
- Изменять свои посты (только авторизованые авторы постов)
- Запрашивать список комментариев к конкретному посту (авторизованые пользователи и анонимы)
- Запрашивать описание отделього комментария (авторизованые пользователи и анонимы)
- Создавать свои комментарии (только авторизованые пользователи)
- Изменять свои комментарии (только авторизованые авторы коментариев)
- Создавать подписку на других пользователей (только авторизованые пользователи)
- Запрашивать список своих подписок (только авторизованые пользователи)
- Поиск по своим подпискам (только авторизованые пользователи)
- Запрашивать список сообществ (авторизованые пользователи и анонимы)
- Запрашивать детальную информацию о сообществах (авторизованые пользователи и анонимы)

Для авторизации используются jwt токены, которые можно получить по адресу:
```
\api\v1\jwt\create\
```

**Установка**

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/knightsdd/api_final_yatube.git

cd api_final_yatube
```


Cоздать и активировать виртуальное окружение:
```
python3 -m venv venv

. venv/bin/activate
```


Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip

pip install -r requirements.txt
```


Выполнить миграции:
```
python3 manage.py migrate
```


Запустить проект:
```
python3 manage.py runserver
```

**Примеры запросов**

Запрос списка постов
GET запрос на ```http://127.0.0.1:8000/api/v1/posts/?limit=2```

Ответ
```
{
    "count": 5,
    "next": "http://127.0.0.1:8000/api/v1/posts/?limit=2&offset=2",
    "previous": null,
    "results": [
        {
            "id": 2,
            "author": "dj",
            "text": "Text of post 2",
            "pub_date": "2021-10-28T18:07:10.770267Z",
            "image": null,
            "group": 1
        },
        {
            "id": 3,
            "author": "dj",
            "text": "Text of post 3",
            "pub_date": "2021-10-28T18:15:27.639964Z",
            "image": null,
            "group": null
        }
    ]
}
```
Добавление комменатрия к посту
POST запрос на ```http://127.0.0.1:8000/api/v1/posts/2/comments/```
Тело запроса
```
{
    "text": "Comment to post 2"
}
```
Ответ
```
{
    "id": 7,
    "author": "dj",
    "post": 2,
    "text": "Comment to post 2",
    "created": "2021-10-31T11:17:33.797120Z"
}
```
Подписка на пользователя
POST запрос на ```http://127.0.0.1:8000/api/v1/follow/```
Тело запроса:
```
{
    "following": "mark"
}
```
Ответ
```
{
    "user": "stive",
    "following": "mark"
}
```
